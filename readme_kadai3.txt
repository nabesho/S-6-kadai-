kadai3.zip の中身について

readme_kadai3.txt … このファイル
uni2smf.exe … コマンドプロンプト上で動くUNI→SMF変換プログラムの例。

uni2smfの使い方
>uni2smf [uniファイル名] [smfファイル名]

ex.）test.uni を test.midに変換する場合
>uni2smf test.uni test.mid


課題３の内容

　UNIとSMFの互換性、UNIデータの解析とMIDI信号の理解


課題３−１

・UNI → SMF 変換プログラム

　UNIファイルを読み込んで、SMFファイルを出力するプログラムを作成せよ。



課題３−２

・SMF → UNI 変換プログラム

　SMFファイルを読み込んで、UNIファイルを出力するプログラムを作成せよ。


補足）
　課題で扱うSMFフォーマットのMIDIメッセージの種類は、
　UNIデータに対応するものだけ扱えばよい。
　具体的には、以下のメッセージをサポートする。
・deltatime
・channel
・note on
・note off
・note number
・velocity

また、出力するsmfファイルは、tempo 125、分解能120にする事。
ランニングステータスには対応しなくてもよい。



課題３−３（任意課題）

・UNIプレイヤー

UNIファイルを読み込んで、MIDIportにMIDI信号を流すUNIプレイヤーを作成せよ。
ただし、この課題は任意とする。余力のある場合のみ行うこと。


レポートには、UNI仕様一覧とそれに対応させたMIDIイベント一覧との対応表を
必ず含めること。


（レポートの構成例）
・目次
・課題内容・実験の目的
・下地となるMIDI-UNI対応表とその説明
・プログラムのアルゴリズムの説明
・プログラムの実行結果と考察
・プログラムリスト
・感想、参考文献（ホームページも可）等


追記：レポートには、授業に対しての感想、改善すべき点も記述すること。



☆☆　課題３のヒント　☆☆

実験の仕様ページ(html)のリンク先に書いてある資料をよく読み、
まずはSMFフォーマットについて理解しなければならない。

まずは、バイナリエディタでSMFファイルを作成してみると良いだろう。
バイナリエディタは、VC++にも付属しているので利用すると良い。
VC++を起動し、メニューバーから「ファイル」→「新規作成」
「ファイル」タブをクリック　→　バイナリファイル選択
適切なファイル名(*.mid)と位置（保存場所）を指定し、OKを押す。
出てきたウィンドウ上で、バイナリファイルの編集が可能である。

別のバイナリエディタを使いたいという人は、
Stirlingという、フリーで配布されているバイナリエディタを紹介しておく。
http://www.vector.co.jp/soft/dl/win95/util/se079072.html



作成したSMFファイルの検証方法

　１　聴いて確認

作成したSMFファイルが仕様通りに作成できたかどうかを調べるには、
MIDIプレイヤーで再生できるかどうかを試すのが一番簡単である。
（再生さえできないMIDIデータは、明らかにデータ構造が間違っている。）


　２　テキスト表示して確認

演奏して聴くだけでは、意図した通りにSMFファイルが作成できたかどうかを
確かめるには不十分である。
ここで、有限会社カクタスソフトが配布している
"SMFView" というアプリケーションを利用する事を勧める。
http://www.cactussoft.co.jp/download.htm
SMFファイルを解析してテキスト表示する。
MIDIイベントと１対１で対応しているので分かりやすく、
SMFの仕様の学習にとても役に立つ。


　３　ＧＵＩで確認（MIDIシーケンサの利用）

SMFファイル確認の為のもう１つの案として、
MIDIシーケンサを利用する方法がある。
ここでは、cherryというフリーのシーケンサを紹介しておく。
http://www.vector.co.jp/soft/dl/win95/art/se071842.html
シーケンサを使えば、SMFファイルを再生できるだけでなく、
GUIにより視覚的にデータの解析ができる。
この cherry では、一般的な「ピアノロール」と呼ばれる表記法を採用している。
これは、ノート（音符）の音高と音の長さの情報を、
音高を縦軸、音の長さを横軸に取った平面上にグラフィカルに表示するものである。



※ ＵＮＩデータの確認について

逆変換の SMF→UNI の確認は、
UNIデータをテキストエディタで開いて実際に目で追ってみる方法と、
uniplayerで演奏させて確かめる方法があるが、
GUIでの確認はここでは考慮しない。


